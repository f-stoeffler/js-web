#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.42kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/node:18-alpine
#2 DONE 0.4s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [ 1/16] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 23.10kB 0.0s done
#5 DONE 0.0s

#6 [ 6/16] RUN npm install
#6 CACHED

#7 [ 5/16] COPY prisma ./prisma/
#7 CACHED

#8 [ 4/16] COPY package*.json ./
#8 CACHED

#9 [ 2/16] RUN addgroup -g 1001 -S nodejs &&     adduser -S nextjs -u 1001 -G nodejs
#9 CACHED

#10 [ 3/16] WORKDIR /app
#10 CACHED

#11 [ 7/16] RUN npx prisma generate
#11 CACHED

#12 [ 8/16] COPY . .
#12 DONE 0.1s

#13 [ 9/16] RUN mkdir -p /srv/upload/js-web/project-images &&     mkdir -p /app/.next/cache &&     chown -R nextjs:nodejs /srv/upload/js-web &&     chown -R nextjs:nodejs /app
#13 DONE 43.0s

#14 [10/16] RUN apk add --no-cache su-exec
#14 0.410 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/x86_64/APKINDEX.tar.gz
#14 0.501 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/x86_64/APKINDEX.tar.gz
#14 0.855 (1/1) Installing su-exec (0.2-r3)
#14 0.860 Executing busybox-1.37.0-r12.trigger
#14 0.868 OK: 10 MiB in 18 packages
#14 DONE 1.0s

#15 [11/16] COPY docker/entrypoint.sh /usr/local/bin/entrypoint.sh
#15 DONE 0.0s

#16 [12/16] RUN chmod +x /usr/local/bin/entrypoint.sh
#16 DONE 0.1s

#17 [13/16] RUN npx prisma migrate deploy
#17 3.008 warn The configuration property `package.json#prisma` is deprecated and will be removed in Prisma 7. Please migrate to a Prisma config file (e.g., `prisma.config.ts`).
#17 3.008 For more information, see: https://pris.ly/prisma-config
#17 3.008 
#17 3.631 Environment variables loaded from .env
#17 3.634 Prisma schema loaded from prisma/schema.prisma
#17 3.652 Datasource "db": SQLite database "prod.db" at "file:/srv/upload/js-web/prod.db"
#17 3.711 
#17 3.711 SQLite database prod.db created at file:/srv/upload/js-web/prod.db
#17 3.730 
#17 3.731 12 migrations found in prisma/migrations
#17 3.731 
#17 3.755 Applying migration `20250819095916_init`
#17 3.779 Applying migration `20250829121353_added_default_values`
#17 3.848 Applying migration `20250902142903_add_projects`
#17 3.864 Applying migration `20250903133651_changed_id_to_slug_project`
#17 3.887 Applying migration `20250911143428_add_created_and_updated_at`
#17 3.978 Applying migration `20251014141118_alttext_image`
#17 3.995 Applying migration `20251015145634_img_versioning`
#17 4.017 Applying migration `20251015151003_drop_img_ver_for_project_images`
#17 4.032 Applying migration `20251016164541_add_public_flag_to_projects`
#17 4.048 Applying migration `20251017093156_add_default_values_to_project`
#17 4.064 Applying migration `20251017113112_add_btn_href_on_front_page`
#17 4.080 Applying migration `20251104084300_header_and_footer`
#17 4.097 
#17 4.098 The following migration(s) have been applied:
#17 4.098 
#17 4.098 migrations/
#17 4.098   â””â”€ 20250819095916_init/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20250829121353_added_default_values/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20250902142903_add_projects/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20250903133651_changed_id_to_slug_project/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20250911143428_add_created_and_updated_at/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20251014141118_alttext_image/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20251015145634_img_versioning/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20251015151003_drop_img_ver_for_project_images/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20251016164541_add_public_flag_to_projects/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20251017093156_add_default_values_to_project/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20251017113112_add_btn_href_on_front_page/
#17 4.098     â””â”€ migration.sql
#17 4.098   â””â”€ 20251104084300_header_and_footer/
#17 4.098     â””â”€ migration.sql
#17 4.098       
#17 4.098 All migrations have been successfully applied.
#17 DONE 4.2s

#18 [14/16] RUN npx prisma db seed
#18 2.531 warn The configuration property `package.json#prisma` is deprecated and will be removed in Prisma 7. Please migrate to a Prisma config file (e.g., `prisma.config.ts`).
#18 2.531 For more information, see: https://pris.ly/prisma-config
#18 2.531 
#18 2.999 Environment variables loaded from .env
#18 3.001 Running seed command `node prisma/seed.js` ...
#18 3.252 Default Header created
#18 3.263 Default Footer created
#18 3.278 
#18 3.278 ðŸŒ±  The seed command has been executed.
#18 DONE 3.3s

#19 [15/16] RUN npm run build
#19 0.367 
#19 0.367 > js-web@0.1.0 build
#19 0.367 > next build
#19 0.367 
#19 2.241 Attention: Next.js now collects completely anonymous telemetry regarding usage.
#19 2.242 This information is used to shape Next.js' roadmap and prioritize features.
#19 2.242 You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
#19 2.242 https://nextjs.org/telemetry
#19 2.243 
#19 2.418    â–² Next.js 15.4.5
#19 2.419    - Environments: .env
#19 2.419 
#19 2.464    Creating an optimized production build ...
#19 65.95  âœ“ Compiled successfully in 57s
#19 65.96    Linting and checking validity of types ...
#19 77.61 
#19 77.61 ./src/app/api/auth/project/main-image/upload/route.ts
#19 77.61 39:16  Warning: 'error' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/app/api/auth/project/secondary-images/upload/route.ts
#19 77.61 39:20  Warning: 'error' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/app/api/projects/route.ts
#19 77.61 12:12  Warning: 'error' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/comps/Footer.tsx
#19 77.61 4:8  Warning: 'Link' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/comps/admin-dashboard/EditFooter.tsx
#19 77.61 3:18  Warning: 'Prisma' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/comps/admin-dashboard/EditNavbarItems.tsx
#19 77.61 6:57  Warning: 'getNavbarItem' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/comps/homepage/Projects.tsx
#19 77.61 68:6  Warning: React Hook useEffect has a missing dependency: 'fetchProjects'. Either include it or remove the dependency array.  react-hooks/exhaustive-deps
#19 77.61 
#19 77.61 ./src/comps/homepage/SkillItem.tsx
#19 77.61 1:8  Warning: 'Link' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/comps/projectpage/ProjectChangeImageModal.tsx
#19 77.61 130:20  Warning: 'setIsSaving' is assigned a value but never used.  @typescript-eslint/no-unused-vars
#19 77.61 159:6  Warning: React Hook useEffect has a missing dependency: 'getHighestId'. Either include it or remove the dependency array.  react-hooks/exhaustive-deps
#19 77.61 169:6  Warning: React Hook useEffect has a missing dependency: 'getHighestId'. Either include it or remove the dependency array.  react-hooks/exhaustive-deps
#19 77.61 284:56  Warning: 'key' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 295:50  Warning: 'key' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 303:56  Warning: 'key' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 318:56  Warning: 'key' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/comps/projectpage/ProjectDescEditor.tsx
#19 77.61 34:10  Warning: 'saveError' is assigned a value but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/comps/projectpage/ProjectTitle.tsx
#19 77.61 1:8  Warning: 'Link' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 10:9  Warning: 'editable' is assigned a value but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/lib/auth.ts
#19 77.61 16:26  Warning: 'account' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 16:35  Warning: 'profile' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 22:30  Warning: 'token' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/lib/frontPage.ts
#19 77.61 2:10  Warning: 'checkIfUserIsAdmin' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 ./src/lib/reviews.ts
#19 77.61 2:10  Warning: 'checkIfUserIsAdmin' is defined but never used.  @typescript-eslint/no-unused-vars
#19 77.61 
#19 77.61 info  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/app/api-reference/config/eslint#disabling-rules
#19 81.78    Collecting page data ...
#19 87.87    Generating static pages (0/10) ...
#19 90.32    Generating static pages (2/10) 
#19 90.32    Generating static pages (4/10) 
#19 90.32    Generating static pages (7/10) 
#19 90.32  âœ“ Generating static pages (10/10)
#19 91.15    Finalizing page optimization ...
#19 91.15    Collecting build traces ...
#19 102.5 
#19 102.6 Route (app)                                       Size  First Load JS
#19 102.6 â”Œ Æ’ /                                          2.88 kB         143 kB
#19 102.6 â”œ â—‹ /_not-found                                  992 B         101 kB
#19 102.6 â”œ Æ’ /admin-dashboard                           5.47 kB         114 kB
#19 102.6 â”œ Æ’ /admin-login                                 162 B         103 kB
#19 102.6 â”œ Æ’ /api/auth/[...nextauth]                      134 B        99.8 kB
#19 102.6 â”œ Æ’ /api/auth/project/main-image/upload          134 B        99.8 kB
#19 102.6 â”œ Æ’ /api/auth/project/secondary-images/upload    134 B        99.8 kB
#19 102.6 â”œ Æ’ /api/project/[...path]                       134 B        99.8 kB
#19 102.6 â”œ Æ’ /api/projects                                134 B        99.8 kB
#19 102.6 â”œ Æ’ /project/[slug]                             190 kB         330 kB
#19 102.6 â”” Æ’ /unauthorized                                401 B         100 kB
#19 102.6 + First Load JS shared by all                  99.7 kB
#19 102.6   â”œ chunks/4bd1b696-cf72ae8a39fa05aa.js        54.1 kB
#19 102.6   â”œ chunks/964-02efbd2195ef91bd.js             43.5 kB
#19 102.6   â”” other shared chunks (total)                   2 kB
#19 102.6 
#19 102.6 
#19 102.6 Æ’ Middleware                                   60.5 kB
#19 102.6 
#19 102.6 â—‹  (Static)   prerendered as static content
#19 102.6 Æ’  (Dynamic)  server-rendered on demand
#19 102.6 
#19 DONE 102.7s

#20 [16/16] RUN mkdir -p /app/.next/cache/images &&     chown -R nextjs:nodejs /app/.next/cache
#20 DONE 0.8s

#21 exporting to image
#21 exporting layers
#21 exporting layers 22.1s done
#21 writing image sha256:4b8cf3b8ebfa793bf3bb5227301c6b8320c3f4cc3c5c04ea47985d9c078a5971
#21 writing image sha256:4b8cf3b8ebfa793bf3bb5227301c6b8320c3f4cc3c5c04ea47985d9c078a5971 done
#21 naming to docker.io/library/js-web-test2:tag done
#21 DONE 22.1s

 [33m2 warnings found (use docker --debug to expand):
[0m - LegacyKeyValueFormat: "ENV key=value" should be used instead of legacy "ENV key value" format (line 47)
 - LegacyKeyValueFormat: "ENV key=value" should be used instead of legacy "ENV key value" format (line 49)
