// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model FrontPage {
  pagePart        String @id @default("FrontPage")
  title           String
  desc            String
  btnText         String
  featuredImages  featuredImage[]

  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}

model featuredImage {
  id              Int @id @default(autoincrement())
  title           String
  desc            String
  imgPath         String
  parent          String @default("FrontPage")
  parentRelation  FrontPage @relation(fields: [parent], references: [pagePart])

  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}

model Skills {
  pagePart    String @id @default("Skills")
  skillItems  SkillItem[]

  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}

model SkillItem {
  id              Int @id @default(autoincrement())
  title           String
  desc            String
  parent          String @default("Skills")
  parentRelation  Skills @relation(fields: [parent], references: [pagePart])

  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}

model Achievements {
  pagePart  String @id @default("Achievements")
  title     String
  desc      String
  reviews   Review[]
  
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}

model Review {
  id              Int @id @default(autoincrement())
  title           String
  desc            String
  parent          String @default("Achievements")
  parentRelation  Achievements @relation(fields: [parent], references: [pagePart])
  
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}

model Projects {
  pagePart  String @id @default("Projects")
  title     String
  desc      String
  projects  Project[]
  
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}

model Project {
  slug            String @id
  featured        Boolean
  mainImage       String
  title           String
  shortDesc       String
  desc            String
  parent          String @default("Projects")
  parentRelation  Projects @relation(fields: [parent], references: [pagePart])
  images          ProjectImage[]
  
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}

model ProjectImage {
  id              Int
  parentSlug      String
  imgPath         String
  parentRelation  Project @relation(fields: [parentSlug], references: [slug], onDelete: Cascade)
  
  @@id([parentSlug, id])
  
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}